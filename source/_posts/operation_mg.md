title: 运维管理三二一
author: James
tags:
  - 运维
categories:
  - 管理
date: 2019-01-09 13:51:00

---

18年底火线回归公司大后端研发团队，全盘接手后端研发、运维和大数据组的团队管理工作。18年运维故障频发，问题严重，公司也高度的重视。故而准备花了1~2个季度时间彻底规划和整改运维相关的工作。

<!-- more -->

**先思考下：运维的职责是什么？** 

可以归纳为：**第一是基础架构标准化**，**第二是基础架构服务化**。

# 基础架构标准化

为什么要做标准化？ 标准化的过程实际上就是对运维对象的识别和建模过程。形成统一的对象模型后，各方在统一的认知下展开有效协作，然后针对不同的运维对象，在抽取它们所对应的运维场景，接下来才是运维场景的自动化实现。

## 标准化的步骤

### 基础设施

1. 第一步，识别实体对象, 主要有服务器、网络、IDC、机柜、存储和配件。
2. 第二部，识别对象属性，如服务器SN序列号、IP地址、厂商、配件设备（CPU、内存、硬盘、网卡、PCIE、BIOS）、维保信息； 网络设备：交换机、带宽等信息。
3. 第三部，识别对象之间的关联关系，网络拓扑图关系。
4. 第四步，识别运维场景：例如：采购、入库、安装、配置、上线、维修等等。 可视化和查询场景，状态（故障）展示。可以很直观地关注到资源细节。

![](/images/op_manage/machine_st.png)

### 应用层实施

1. 第一步，识别对象： 这个识别过程是在架构设计或者拆分的时候确定下来的。
2. 第二步，识别对象属性：应用是业务的抽象逻辑，业务属性需要业务架构师在架构过程中识别出来。运维属性：
   1. 应用的元数据属性：一个应用的描述信息。应用名、应用owner、是否核心链路应用以及应用功能说明
   2. 应用代码属性：编程语言以及版本，Gitlab地址。
   3. 应用部署模式：基础软件包，语言包 Java、C++、Go 等；容器如 Tomcat、Jetty等。
   4. 应用目录信息：运维脚本目录、日志目录、应用包目录、临时目录等等。
   5. 应用运行脚本：启停脚本、监控监测脚本。
   6. 运行时参数配置：运行端口、JVM参数等等。
3. 第三步，识别对象关系：
   1. 应用于基础设施：包括应用与资源、应用与 VIP、应用与 DNS 等等的关系。
   2. 应用与应用之间的关系：应用服务或 API 与其它应用服务和 API 的依赖关系。
   3. 应用与各类基础组件之间的关系：如应用与缓存，应用与消息、应用与 DB 等等之间的关系。
4. 第四步，识别应用的运维场景：应用创建、持续集成、持续发布、扩容、缩容、监控，容量评估、压测、限流降级。

![](/images/op_manage/app_st.png)

# 稳定性体系建设

- 如何发现线上问题
- 如何快速定位问题。
- 如果快速从故障中恢复
- 有效评估系统容量
- 日常演练

# 运维需求处理

- 为什么要这样做？
- 谁要求做这件事情的？
- 这样做的目的是什么？
- 这样做是为了解决什么问题？
  站在对方角度去考虑，去思考对方要解决的问题是什么。

# 软件生命周期阶段

运维大部分的工作是软件生命周期中的运行维护阶段，日常很多都是围绕这个开展的。如图：
![](/images/op_manage/OP_life.jpeg)

# 持续交付体系建设

持续交付体系是拉通运维和业务开发的关键纽带，是提升整个研发团队效率的关键部分。这个部分是整个软件或应用的生命周期的管理体系，包括从应用创建、研发阶段的持续集成，上线阶段的持续部署发布，再到线上运行阶段的各类资源服务扩容缩容等。

1. 配置管理：标准化和CMDB； 还包括版本控制、依赖配置、软件配置和环境配置四个部分。
2. 需求拆解：业务架构拆解的粒度和我们最终发布上线的粒度相匹配
3. 提交管理：开发完毕提交代码，分支合并。
4. 构建打包：代码编译成可发布的软件包
5. 自动化测试：功能测试和非功能性测试
6. 部署发布：发布到不同的环境，如开发、测试、预发布、以及线上全量环境